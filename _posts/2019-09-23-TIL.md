---
layout: post
title: "공개API에 실망했다"
tags: [TIL]
---

원하는 버스 번호와 버스 정거장 이름을 지정해놓으면 해당 버스 정거장에 버스가 10분 전 도착 예정일 경우 데스크톱에 알람을 보내주는 프로그램을 만들고자 했다. 조금 검색을 해보니 버스 정보를 얻을 수 있는 API를 제공한다고 해서, [공공데이터 포털](https://www.data.go.kr/)에 가입하고 서비스 사용 신청을 했다. 내가 고른 API의 경우 신청시 즉시승인이 되어 곧바로 사용가능했다. 하지만 아래와 같은 문제점들이 있었고, 개발 진행을 할 수 있는 상황도 아니었다. 

### 실망스러웠던 부분들  

1. 안내 사항이 부족하다.  
"버스 도착 정보 조회 서비스"의 기능 중 하나인 "버스도착정보항목조회"를 이용하려고 했다. 그런데 요청주소로 요청을 날릴 때 정류소 아이디, 노선 아이디, 정류소 순번을 함께 줘야한다. 정류소 아이디는 정류소 번호이고, 정류소 순번은 정류소 목록의 가장 처음부터 해당 정류소까지 번호를 세면 된다. 노선 아이디는 어디서 얻지? 정류소 아이디가 정류소 번호니까 노선 아이디도 노선 번호, 즉 버스 번호가 아닐까 해서 입력해보았지만 에러 메세지가 반환될 뿐이었다.  

노선 아이디를 얻기 위해서 [공공데이터 포털](https://www.data.go.kr/)에서 "버스노선 조회 서비스"를 신청한 다음 "노선번호목록조회" 기능을 이용해야 했다. 노선번호, 즉 버스 번호를 포함해서 요청을 날리면 노선번호를 포함한 정보들을 얻을 수 있다. 정류소 아이디는 정류소 번호면서 노선 아이디는 노선 번호가 아니다. 통일성이 없는데, 안내마저 없었다.  

2. 예제코드에 오타가 있는 걸 알면서도 고치지 않는다.  
요청변수로 `serviceKey`라는 변수명에다 발급받은 키를 넣어서 줘야하는데 예제코드에는 `ServiceKey`라고 되어있다. 복사해서 조금 고쳐서 실행했는데 에러가 나길래 QnA를 찾아보니, 대문자 S를 소문자 s로 바꾸라는 답변이 적혀 있었다.  

3. 1:1 QnA 게시판에 파일을 첨부할 수 없었다.    
파일첨부 기능은 존재하지만, 파일을 넣으려고 시도할 경우 "최대 첨부 가능한 파일 개수를 넘었습니다."라는 팝업이 뜨며 첨부되지 않는다. 처음에 png 파일을 넣었었는데 혹시 확장자 문제인가 하여 jpg와 pdf도 시도해보았지만 똑같았다. (팝업 차단도 해제되어 있는 상태였다) 테스트해보진 않았지만 인터넷 익스플로러에서만 정상적으로 동작하는 걸지도 모르겠다. 여튼 파일 첨부가 안 되어서 링크를 내용에다 적는 것으로 대신했다.  


### 개발 강제 일시정지  

정보가 필요한 버스가 최근에 버스 노선이 변경된 버스인데 해당 정보가 반영이 아직 안 되어 있는 것 같았다. 1:1 문의 게시판에 글을 남겼고, 답변이 몇 시간도 안 되어서 바로 왔다. 내가 필요한 건 특정 마을버스에 대한 정보인데, 문제는 마을버스라서 해당 지자체에서 직접 운행 정보를 수집 관리한다는 거다. 도에서 공식으로 제공하는 버스 조회 서비스에서 마을버스가 조회는 된다. 지자체에서 도착 안내가 되기를 요청했기 때문이다. 하지만 도의 관리 대상은 아니어서 도에서 제공하는 오픈API에서는 정보를 얻을 수 없다는 것이다. 업데이트의 문제가 아니었다.  

정작 시청 홈페이지에 들어가서 공개 정보 관련 메뉴에 들어가보니 공공데이터 포탈로 연결되는 링크가 있을 뿐이었다. 방법을 찾기 위해서는 시청에 직접 전화로 문의를 하는 게 빠를 것 같다.