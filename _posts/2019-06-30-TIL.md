---
layout: post
title: "190630 TIL - 핸드폰 인증 동의 자동 체크 프로그램"
tags: [TIL]
---

옛날에 버려뒀던 핸드폰 인증시 자동으로 동의항목에 체크해주는 크롬 확장 프로그램 코드를 다시 썼다. 

하고자 하는 것은 간단하다. 
1. 핸드폰 인증시 동의항목을 자동으로 체크한다.
2. 단, 광고 동의 항목은 체크되면 안 된다. 

먼저 페이지의 title을 확인해서 본인 인증 관련된 페이지인지를 확인하다. 
그 다음에는 동의항목들을 찾아내서 다 체크를 해주면된다. 말은 간단하지만, 업체마다 html 작성 방식이 다 다르기 때문에 특정 id로 원하는 항목만을 찾아서 처리를 하기는 현실적으로 불가능하다. 
하지만 동의항목들은 전부 checkbox이므로, 모든 input 요소들을 찾은 다음 checkbox인 것들만 checked = true로 바꿔주면 원하는 결과를 얻을 수 있다.

광고 동의 항목은 체크하고 싶지 않은데, 이는 span과 label 태그들을 찾아서 innerText에 "광고"가 포함되면 click되게끔 했다. 그러면 앞서 체크된 것이 해제될 것이기 때문이다.

각종 사이트들을 돌아다니며 다 제대로 작동하는지 확인했는데, hyFresh의 비밀번호 찾기 본인인증은 계속 통과를 못하고 있다. 페이지 로딩이 느린 것인지 setTimeout으로 시차를 두고 실행해보니 작동이 잘 될 때도 있고 안 될 때도 있었다. 
원인이 무엇인지는 내일 파악해야겠다.

한편 queryselectorall로 찾은 것은 리스트같아 보이지만 리스트가 아니므로 forEach 같은 함수를 사용할 수 없다는 사실을 새삼스럽게 깨달았다.