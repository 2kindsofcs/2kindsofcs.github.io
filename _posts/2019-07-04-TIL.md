---
layout: post
title: "190704 TIL"
tags: [TIL]
---

서버 개발자로 일하고 있는 지인분을 만나 자바 스프링에 대해 간략히 설명을 들었다.
아래는 들으면서 메모한 것들이다. 


- 스프링: mvc라는 디자인을 따라갔는데 요즘은 webflux가 나옴 
- webflux는 펑셔널. 핸들러 사용 적극적 권유.
- 어노테이션: 파이썬의 데코레이터와 유사  
@Conteroller  
@Service  
@Repository  
붙이면 알아서 인식해서 해당 클래스로 작동할 수 있게 해줌.

- 의존성 주입(dependency inversion): 내부에서 정해주던 거 밖에서 정해서 넣어준다

- 빈: 
@Bean
빈을 띄운다. 싱글톤. 딱 하나만 존재함. 스태틱 클래스 같은 느낌. 
컨트롤러들을 싹 전부 찾아서 띄워줌. 
요청이 들어왔을때 이걸 보고 처리할 수 있는 적당한 컨트롤러에게 보내줌. 

```
{% raw %}
Test{
    @Bean
    public Test makeTest() {

    }
}
{% endraw %}
```
이러면 Test가 필요할때 makeTest라는 메소드를 쓰게됨  

```
{% raw %}
test2 {
    @Bean 
    public Test2 makeTest2bean(Test t) {

    }
}
```
{% endraw %}


- 오토 와이어링(auto-wiring)  
```
{% raw %}
@Autowired 
public Test test;

class Person {
    private static Test t;
    public Person(Test t) {
        this.t = t
    }
}
```
{% endraw %}

- 라이브러리 lombok 쓰면 굉장히 편하게 쓸 수 있음.

- @Controller:  
리퀘스트 매핑을 해줌. user/get은 누가 핸들링해줄거냐 그런 것들.
service logic에 넘기는 역할. 간단한 전처리 /후처리 해줌. 클라에게 보여주기 싫은 것들 감추고...그런.
비즈니스로직은 여기 안 들어감.

- @Service:  
비즈니스 로직 돌아감. db에서 뭘 꺼내오고 어떻게 가공하고 처리하고 그런 것들. 
외부 api도 여기서 부름. 예를 들어 토큰 요청 들어오면 여기서 토큰 만들어서 주는 거.  

- @Repository:
db 작업 wrapper.   

몽고리포지토리는 두 개를 받음. 매핑될 클래스와 아이디. 

```
{% raw %}
@Repository
public interface CustomMongoRepo extend abstract MongoRepository {
    public Test findById(string id)
    public Tem findByFieldAlike (strnig ~~)
}

@Data
@Entitiy("")
Test {
    @id
    str id
    string field 
}
```
{% endraw %}

- RESTful API:
uri 어떻게 정할 것이며 메소드 어떻게 만들 것이며...
uri 접근할 때 /people/{id} 식으로 해야한다 라든가 규칙

- 기타 알아두면 좋을 것들: 
http / https 메소드 get post delete patch
네트워크 패킷 구조. 서버 리퀘스트 구조. 헤더는 어떻게 되어있나. 쿠키는 어떻게 관리되나.
body는 어떻게 되어있고. 쿠키는 어떻게 저장되는가? 
url 과 uri 차이. ~.com 뒤로 오는 것들. 
쿼리스트링

- @Component
- @Configuration


## 제이쿼리 
제이쿼리를 왜 쓰는가? 옛날에는 브라우저마다 api가 달랐다. 그래서 웹페이지 조작하고 싶으면 일일이 그에 맞춰서 작성해야
했다. 전에는 제이쿼리가 알아서 모든 브라우저에서 동일하게 동작하도록 맞춰줬었다. 그런데 요즘은 다 규격이 통일되어 있다.
그래서 제이쿼리를 쓰지 않아도 내가 원하는 행동들을 많이 할 수 있게 되었다. 


##나는 도커를 왜 쓰나? 
나는 서버를 수백 수천 대를 돌리는 것도 아닌데 도커를 왜 쓸까? 쓰면 뭐가 좋을까?
도커를 쓰면 이미지를 이용하여 컨테이너에 내 특정 프로그램을 위한 환경을 만들 수 있다.
예를 들어 내 서버에 프로그램1은 파이썬2를 쓰는데 프로그램2는 파이썬3을 쓴다고 하자. 
이때 가상환경 만들어서 쓰는 방법도 있겠지만 도커를 쓰면 충돌나지 않게 손쉽게 관리할 수 있다.
즉 도커로 관리하는 것이 더 편하다. 